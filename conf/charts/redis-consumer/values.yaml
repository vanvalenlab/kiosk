# Default values for redis-consumer.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicas: 1

image:
  repository: vanvalenlab/kiosk-redis-consumer
  tag: latest
  pullPolicy: IfNotPresent

resources: {}

tolerations: {}

affinity: {}

nodeSelector: {}

service:
  type: "ClusterIP"

  httpIngressEnabled: true
  internalHttpPort: 8080
  httpTargetPort: 8080
  externalHttpPort: 8080

  httpsIngressEnabled: false

env:
  DEBUG: "True"
  INTERVAL: 10
  CONSUMER_TYPE: "image"
  QUEUE: "segmentation"
  SEGMENTATION_QUEUE: "segmentation"
  EMPTY_QUEUE_TIMEOUT: 5
  EXPIRE_TIME: 3600
  GRPC_TIMEOUT: 30
  GRPC_BACKOFF: 3
  MAX_RETRY: 0

  REDIS_HOST: "redis-master"
  REDIS_PORT: "6379"
  REDIS_TIMEOUT: 3

  TF_HOST: "overwrite_this"
  TF_PORT: "sepcify_me"
  TF_TENSOR_NAME: "image"
  TF_TENSOR_DTYPE: "DT_FLOAT"

  CLOUD_PROVIDER: "aws"
  AWS_REGION: "us-east-1"
  GKE_COMPUTE_ZONE: "us-west1-b"

  NUCLEAR_MODEL: "panoptic:3"
  NUCLEAR_POSTPROCESS: "retinanet-semantic"

  PHASE_MODEL: "resnet50_retinanet_20190813_all_phase_512:0"
  PHASE_POSTPROCESS: "retinanet"

  CYTOPLASM_MODEL: "resnet50_retinanet_20190903_all_fluorescent_cyto_512:0"
  CYTOPLASM_POSTPROCESS: "retinanet"

  LABEL_DETECT_ENABLED: "false"
  LABEL_DETECT_MODEL: "LabelDetection:0"
  LABEL_RESHAPE_SIZE: 216
  LABEL_DETECT_SAMPLE: 3

  SCALE_DETECT_ENABLED: "false"
  SCALE_DETECT_MODEL: "ScaleDetection:0"
  SCALE_RESHAPE_SIZE: 216
  SCALE_DETECT_SAMPLE: 3

  DRIFT_CORRECT_ENABLED: "false"
  NORMALIZE_TRACKING: "false"

  TRACKING_MODEL: "tracking_model_benchmarking_757_step5_20epoch_80split_9tl:1"
  TRACKING_SEGMENT_MODEL: "panoptic:3"
  TRACKING_POSTPROCESS_FUNCTION: "retinanet"

secrets:
  AWS_ACCESS_KEY_ID: "change_me"
  AWS_SECRET_ACCESS_KEY: "change_me"
  AWS_S3_BUCKET: "change_me"
  GKE_BUCKET: "change_me"
