spec:
  machineType: p2.xlarge
  taints:
  - nvidia.com/gpu=:NoSchedule
  hooks:
  - before:
    - docker.service
    - docker-healthcheck.service
    manifest: |
      Type=oneshot
      ExecStart=/bin/bash -c '/usr/bin/curl -L -S -f https://raw.githubusercontent.com/vanvalenlab/kiosk/gpus/scripts/nvidia-docker-installer.sh | /bin/bash -x'
    name: nvidia-docker-install.service
  minSize: 1
  maxSize: 2
  # https://github.com/kubernetes/autoscaler/issues/903#issuecomment-392885606
  kubelet:
    featureGates:
      DevicePlugins: "true"
